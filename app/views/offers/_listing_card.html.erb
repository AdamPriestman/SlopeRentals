<div data-controller="reservation">
  <div class="card-booking">
    <%= cl_image_tag listing.photos.first.key %>
    <div class="card-booking-infos">
      <h2><%= listing.name %></h2>
      <p><%= listing.equipment_type %></p>
      <p><%= link_to "Item details", listing_path(listing) %></p>
      <p><%= link_to "Edit this listing", edit_listing_path(listing) %></p>
      <p><%= link_to "Delete this listing", listing_path(listing), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %></p>
    </div>
    <div class="card-booking-dates">
      <h3><%= listing.price_per_day %>Â£ per day</h3>
      <button class="btn btn-outline-dark reserve" data-action="click->reservation#displayReservations">Reservations</button>
    </div>
  </div>
  <div class="d-none" data-reservation-target="reservations">
    <div class="incoming-card">
      <% if listing.offers.empty? %>
        <p>No reservations for this item yet</p>
      <% else %>
        <% listing.offers.sort_by(&:start_date).each do |offer| %>
          <%= render "incoming_booking", offer:offer %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
